apiVersion: v1
kind: Pod
metadata:
  name: jenkins-copy
spec:
  restartPolicy: Never
  containers:
    - name: copy
      image: alpine:3.20
      command: ["/bin/sh","-c"]
      args:
        - |
          set -e
          echo "âœ… Copying OLD Jenkins home from /old to /new"
          echo "ðŸ“‚ Source contents:"
          ls -la /old | head -n 30
          echo "ðŸšš Copying..."
          cp -a /old/. /new/
          echo "âœ… COPY_DONE"
          sleep 2
      volumeMounts:
        - name: old
          mountPath: /old
        - name: new
          mountPath: /new
  volumes:
    # âœ… CONFIRMED OLD JENKINS HOME
    - name: old
      hostPath:
        path: /jenkins-home
        type: Directory
    # âœ… NEW PVC-BASED JENKINS HOME
    - name: new
      persistentVolumeClaim:
        claimName: jenkins-home